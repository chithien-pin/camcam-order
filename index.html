<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>
        CAMCAM ORDER
    </title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
    <link rel="icon" href="./images/camcam-logo.png" sizes="32x32">
</head>
<body class="bg-orange-50">
<div id="app" class="max-w-md mx-auto bg-white rounded-3xl shadow-lg overflow-hidden mt-10">
    <div class="flex items-center justify-center p-4">
        <h1 class="text-xl text-orange-500 font-semibold">
            ĂN VẶT CAM CAM
        </h1>
    </div>
    <div class="px-4">
        <div v-for="(item, key) in menuList" class="flex items-center justify-between bg-gray-100 rounded-xl p-4 mb-4"
             :key="key">
            <img alt="Nike Air Max 200" class="w-16 h-16 rounded-full" height="60"
                 :src="item.imageUrl"
                 width="60"/>
            <div class="flex-1 ml-4">
                <h2 class="text-lg font-semibold">
                    {{item.name}}
                </h2>
                <p class="text-orange-600">
                    {{formatMoney(item.price)}}
                </p>
            </div>
            <div class="flex items-center">
                <button class="bg-gray-200 text-gray-600 rounded-full w-8 h-8 flex items-center justify-center"
                @click="decreaseQuantity(key)">
                    -
                </button>
                <span class="mx-2">{{item.quantity}}</span>
                <button class="bg-orange-500 text-white rounded-full w-8 h-8 flex items-center justify-center"
                @click="increaseQuantity(key)">
                    +
                </button>
            </div>
        </div>
    </div>
    <div class="px-4 py-2 border-t border-gray-200">
        <div class="flex justify-between text-gray-600 mb-2">
            <span> Tạm tính: </span>
            <span>{{formatMoney(subTotal)}}</span>
        </div>
        <div class="flex justify-between text-gray-600 mb-2">
            <span> Giảm giá: </span>
            <span>{{formatMoney(discount)}}</span>
        </div>
        <div class="flex justify-between text-gray-600 mb-2">
            <span>Ship</span>
            <span>{{feeShip > 0 ? feeShip : 'Phờ ri'}}</span>
        </div>
    </div>
    <div class="px-4 py-4 bg-gray-100 flex items-center justify-between">
        <span class="text-2xl font-semibold">{{formatMoney(total)}}</span>
        <button class="bg-gray-500 text-white rounded-full px-6 py-2 flex items-center"
                :class="{'bg-orange-500': total>0}">
            <i class="fas fa-paper-plane mr-2"></i>
            Đặt đơn
        </button>
    </div>
</div>
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
<script async>
    const {createApp, computed} = Vue

    createApp({
        setup() {

        },
        methods: {
            formatMoney(money) {
                return new Intl.NumberFormat('vi-VN', {
                    style: 'currency',
                    currency: 'VND'
                }).format(money);
            },
            increaseQuantity(id) {
                this.menuList[id].quantity++;
                this.calculateTotal()
            },
            decreaseQuantity(id) {
                if (this.menuList[id].quantity > 0) {
                    this.menuList[id].quantity--;
                    this.calculateTotal()
                }
            },
            calculateTotal() {
                let subTotal = 0;
                for (const id in this.menuList) {
                    subTotal += this.menuList[id].quantity * this.menuList[id].price;
                }
                this.subTotal = subTotal;
                this.total = subTotal + this.feeShip - this.discount;
            }
        },
        data() {
            return {
                menuList: {
                    1: {
                        name: 'Bánh Tráng Trộn',
                        imageUrl: 'https://storage.googleapis.com/a1aa/image/EL5cB-64TIOi2CtsaIZx-lIBqQdexrRXjXL6h38LSXI.jpg',
                        price: 20000,
                        quantity: 0
                    },
                    2: {
                        name: 'Bánh Tráng Chấm',
                        imageUrl: 'https://storage.googleapis.com/a1aa/image/EL5cB-64TIOi2CtsaIZx-lIBqQdexrRXjXL6h38LSXI.jpg',
                        price: 15000,
                        quantity: 0
                    },
                    3: {
                        name: 'Bánh Tráng Muối',
                        imageUrl: 'https://storage.googleapis.com/a1aa/image/EL5cB-64TIOi2CtsaIZx-lIBqQdexrRXjXL6h38LSXI.jpg',
                        price: 9000,
                        quantity: 0
                    },
                    4: {
                        name: 'Bánh Gấu',
                        imageUrl: 'https://storage.googleapis.com/a1aa/image/EL5cB-64TIOi2CtsaIZx-lIBqQdexrRXjXL6h38LSXI.jpg',
                        price: 45000,
                        quantity: 0
                    }
                },
                total: 0,
                subTotal: 0,
                feeShip: 0,
                discount: 0,
            }
        }
    }).mount('#app')
</script>
</body>
</html>